
TITLE Sodium Competition Test - 0 mg/L Na
DATABASE C:\Program Files\USGS\phreeqc-3.8.6-17100-x64\database\phreeqc.dat

# Initial column - equilibrated with Na
SOLUTION 1
    units     mg/L
    temp      25
    pH        7.0
    Na        1000
    Cl        1540 charge
    water     1 kg

EXCHANGE 1
    X         0.5  # Low capacity for quick breakthrough
    -equilibrate solution 1

SAVE solution 1
SAVE exchange 1
END

# Transport simulation
USE solution 1
USE exchange 1

SOLUTION 0  # Feed water
    units     mg/L
    temp      25
    pH        7.5
    Ca        180
    Mg        80
    Na        0
    Cl        420.0 charge

TRANSPORT
    -cells    1
    -shifts   100
    -timest   1
    -flow_direction forward
    -boundary_conditions flux flux
    -punch_cells 1

SELECTED_OUTPUT
    -file comp_test_0.tsv
    -reset false
    -step true
    -totals Ca Mg Na
    -molalities CaX2 MgX2 NaX

USER_PUNCH
    -headings Shift Ca_mg_L Na_on_resin
    -start
    10 PUNCH STEP_NO
    20 PUNCH TOT("Ca") * 40.08 * 1000
    30 PUNCH MOL("NaX") / (MOL("CaX2")*2 + MOL("MgX2")*2 + MOL("NaX"))
    -end

END
