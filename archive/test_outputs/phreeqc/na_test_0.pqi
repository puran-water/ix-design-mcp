TITLE Sodium Competition Test - Na = 0 mg/L

EXCHANGE_SPECIES
    Na+ + X- = NaX
        log_k   0.0
    Ca+2 + 2X- = CaX2
        log_k   1.6    # Selectivity Ca/Na = 40

SOLUTION 0  # Feed water
    units     mg/L
    temp      25.0
    pH        7.5
    Ca        180
    Na        0
    Cl        360.0 charge

SOLUTION 1-5  # Initial column - Na form
    units     mg/L
    temp      25.0
    pH        7.0
    Na        1000
    Cl        1540 charge
    water     1 kg

EXCHANGE 1-5
    X         0.02  # Low capacity for quick breakthrough
    -equilibrate 1

TRANSPORT
    -cells 5
    -shifts 100  # 100 shifts = 20 bed volumes
    -flow_direction forward
    -boundary_conditions flux flux
    -punch_frequency 1
    -punch_cells 5

SELECTED_OUTPUT
    -file na_test_0.pqi_output.csv
    -reset false
    -step
    -totals Ca Na

USER_PUNCH
    -headings Step BV Ca_mg_L Na_mg_L Ca_pct
    -start
    10 PUNCH STEP_NO
    20 PUNCH STEP_NO / 5
    30 PUNCH TOT("Ca") * 40078
    40 PUNCH TOT("Na") * 22990
    50 PUNCH TOT("Ca") * 40078 / 180 * 100
    -end

END
